# Проектная работа "Веб-ларек"

## Web-ларёк: Интернет-магазин для веб-разработчиков
Добро пожаловать в Web-ларёк! Этот проект представляет собой интернет-магазин, где вы можете просматривать каталог товаров для веб-разработчиков, добавлять товары в корзину и оформлять заказы. В данном документе приведено описание архитектуры проекта, его функциональные требования и используемые интерфейсы.

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

## Сборка

```
npm run build
```

## Описание типов данных

* ```ICardDate``` - интерфейс описывающий структуру данных продукта, включает в себя: id, описание, URL изображения, название, категорию и стоимость товара.
* ```IAppState ```-  интерфейс для типов общего стостояния приложения(содержит состояние корзины, каталога товаров и заказа.).
* ```IOrderForm``` -  интерфейс для указания атрибутов формы заказа, включает в себя данные: адреса доставки, способа оплаты, электронную почту и номер телефона.
* ```IOrder``` - типизирует объект, который представляет собой заказ и содержит следующие данные:
    1. `items` - массив строк, представляющий товары в заказе.
    2. `total` - число, обозначающее общую стоимость заказа.
* ```IOrderResult``` - интерфейс для результата оформления заказа.

## Архитектура
Код приложения разделен на слои согласно парадигме MVP :
- **Слой представления** - отвечает за отображение данных на странице
- **Слой данных** - отвечает за хранение и изменение данных
- **Презентер** - отвечает за связь представления и данных

## Базовый код

1. Класс ```EventEmitter``` обеспечивает работу событий. 
   * on - устанавливает обработчик на событие.
   * off - снимает обработчик с события.
   * emit - инициирует событие с данными.
   * onAll - устанавливает обработчик на все события.
   * offAll - снимает обработчик со всех событий.
   * trigger - устанавливает триггер, генерирующий событие при вызове.

2. Класс ```Api``` используется для взаимодействия с внешними системами.
   * возможность отправлять GET и POST-запросы;

3. Класс ```Component``` является базовым классом для компонентов представления.
   Методы:

   * toggleClass - переключает класс элемента.
   * setText - устанавливает текстовое содержание.
   * setDisabled - меняет статус блокировки элемента.
   * setHidden - скрывает элемент.
   * setVisible - показывает элемент.
   * setImage - устанавливает изображение с альтернативным текстом.
   * render- возвращает корневой DOM-элемент.

4. Класс ```Model``` базовый класс для создания классов моделей данных.
   * `emitChanges` - сообщает всем, что модель изменилась


## Компоненты модели данных

 ```AppData``` реализует работу с моделью приложения.

 **Класс `AppState`**: - Хранит глобальное состояние приложения, включая информацию о корзине, каталоге продуктов, заказе и ошибках формы.
   - Содержит методы для работы с данными, такие как расчет общей суммы корзины, установка каталога продуктов, добавление/удаление продуктов в корзину, очистка корзины, а также валидация контактной информации и заказа:
     * getTotal() - отдаёт сумму товаров из корзины
     * setCatalog() - создаёт массив карточек товаров;
     * addToBasket() - добавляет товар в корзину
     * removeFromBusket() - удаляет товар из корзины
     * clearBasket() - очищает корзину
     * clearOrder() - очищает данные текущего заказа
     * checkProduct() - проверяет наличие товара в корзине
     * setOrderField() - заполняет данные формы в заказ (тип оплаты, адрес)
     * validateOrder() - проверяет валидацию типа оплаты и адреса
     * setContactField() - заполняет данные формы в заказ ( email, телефон)
     * validateContact() - проверяет данные почты и телефона


- Cвойства:\
  `basket: ICardDate[] = [] - хранит список товаров в корзине;`\
  `catalog: ICardDate[] - хранит данные о товарах;`\
  `order: IOrder = { - хранит данные о заказе`\
    `   email: '',`\
    `   phone: '',`\
    `   payment: '',`\
    `   items: [],`\
    `   total: 0,`\
    `   address: ''`\
  `};`
  `formErrors: FormErrors = {} - хранение ошибок валидации;`


### Интерфейс IProdAPI

- Интерфейс IProdAPI определяет методы для взаимодействия с API относительно продуктов.
- Методы:
  - getCardList: получение списка продуктов в виде массива товаров.
  - orderItems: оформление заказа с передачей информации о заказе и получение результата заказа.

### Класс ProdAPI - для взаимодействие с сервером.

- Класс ProdAPI реализует интерфейс IProdAPI и предоставляет методы для работы с продуктами через API, наследуя функционал от базового класса Api.
- Методы класса:
  - getCardList(): выполняет GET-запрос на сервер для получения списка продуктов и обработки данных.
  - orderItems(order: IOrder): выполняет POST-запрос на сервер для оформления заказа и получения результата.

Этот класс представляет API для взаимодействия с продуктами, включая получение списка продуктов и заказ товаров.